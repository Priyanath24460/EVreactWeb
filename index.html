<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EV Charging Booking System</title>
    
    <!-- Bootstrap 5 CSS -->
    <link 
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" 
      rel="stylesheet" 
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" 
      crossorigin="anonymous"
    >
    
    <!-- Font Awesome Icons -->
    <link 
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" 
      rel="stylesheet" 
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" 
      crossorigin="anonymous" 
      referrerpolicy="no-referrer" 
    />
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link 
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" 
      rel="stylesheet"
    >
    
    <style>
      /* Custom CSS variables */
      :root {
        --primary-color: #007bff;
        --secondary-color: #6c757d;
        --success-color: #28a745;
        --danger-color: #dc3545;
        --warning-color: #ffc107;
        --info-color: #17a2b8;
        --light-color: #f8f9fa;
        --dark-color: #343a40;
        --border-radius: 0.375rem;
        --box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        --transition: all 0.3s ease;
      }
      
      /* Global styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        background-color: #f8f9fa;
        line-height: 1.6;
        color: #333;
      }
      
      #root {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }
      
      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }
      
      ::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 4px;
      }
      
      ::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 4px;
      }
      
      ::-webkit-scrollbar-thumb:hover {
        background: #a8a8a8;
      }
      
      /* Loading animation */
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      .fade-in {
        animation: fadeIn 0.5s ease-in-out;
      }
      
      /* Print styles */
      @media print {
        .no-print {
          display: none !important;
        }
        
        .card {
          border: 1px solid #ddd !important;
          box-shadow: none !important;
        }
      }
    </style>
  </head>
  
  <body>
    <div id="root">
      <!-- React app will be mounted here -->
      <div class="d-flex justify-content-center align-items-center vh-100 bg-light">
        <div class="text-center">
          <div class="spinner-border text-primary mb-3" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <p class="text-muted">Loading EV Charging Booking System...</p>
        </div>
      </div>
    </div>
    
    <!-- Bootstrap 5 JS Bundle with Popper -->
    <script 
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" 
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" 
      crossorigin="anonymous"
    ></script>
    
    <!-- Custom JavaScript for additional functionality -->
    <script>
      // Add loading state management
      document.addEventListener('DOMContentLoaded', function() {
        console.log('EV Charging Booking System - Loading...');
        
        // Check if user has preferred theme
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const savedTheme = localStorage.getItem('theme');
        
        if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
          document.documentElement.setAttribute('data-bs-theme', 'dark');
        }
        
        // Add service worker for PWA capabilities (optional)
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', function() {
            navigator.serviceWorker.register('/sw.js')
              .then(function(registration) {
                console.log('ServiceWorker registration successful with scope: ', registration.scope);
              })
              .catch(function(error) {
                console.log('ServiceWorker registration failed: ', error);
              });
          });
        }
        
        // Handle online/offline status
        window.addEventListener('online', function() {
          this.document.dispatchEvent(new CustomEvent('appOnline'));
        });
        
        window.addEventListener('offline', function() {
          this.document.dispatchEvent(new CustomEvent('appOffline'));
        });
      });
      
      // Utility functions
      window.appUtils = {
        // Format date
        formatDate: (dateString) => {
          return new Date(dateString).toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'short',
            day: 'numeric'
          });
        },
        
        // Format time
        formatTime: (dateString) => {
          return new Date(dateString).toLocaleTimeString('en-US', {
            hour: '2-digit',
            minute: '2-digit'
          });
        },
        
        // Format currency
        formatCurrency: (amount) => {
          return new Intl.NumberFormat('en-US', {
            style: 'currency',
            currency: 'USD'
          }).format(amount);
        },
        
        // Generate random ID
        generateId: () => {
          return Date.now().toString(36) + Math.random().toString(36).substr(2);
        },
        
        // Debounce function
        debounce: (func, wait) => {
          let timeout;
          return function executedFunction(...args) {
            const later = () => {
              clearTimeout(timeout);
              func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
          };
        }
      };
    </script>
    
    <!-- Error boundary fallback -->
    <script>
      // Global error handler
      window.addEventListener('error', function(e) {
        console.error('Global error caught:', e.error);
        
        // Show user-friendly error message for production
        if (window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {
          const errorElement = document.createElement('div');
          errorElement.className = 'alert alert-danger alert-dismissible fade show m-3';
          errorElement.innerHTML = `
            <strong>Something went wrong!</strong> Please refresh the page or try again later.
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          `;
          document.body.prepend(errorElement);
        }
      });
      
      // Unhandled promise rejection handler
      window.addEventListener('unhandledrejection', function(e) {
        console.error('Unhandled promise rejection:', e.reason);
        e.preventDefault();
      });
    </script>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Favicon and app icons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    
    <!-- Meta tags for SEO and social sharing -->
    <meta name="description" content="EV Charging Station Booking System - Book your electric vehicle charging slots online">
    <meta name="keywords" content="EV charging, electric vehicle, booking system, charging stations">
    <meta name="author" content="EV Charging System">
    
    <!-- Open Graph meta tags -->
    <meta property="og:title" content="EV Charging Booking System">
    <meta property="og:description" content="Book your electric vehicle charging slots online">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/og-image.jpg">
    
    <!-- Twitter Card meta tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="EV Charging Booking System">
    <meta name="twitter:description" content="Book your electric vehicle charging slots online">
    <meta name="twitter:image" content="/twitter-image.jpg">
    
    <!-- Theme color for mobile browsers -->
    <meta name="theme-color" content="#007bff">
    <meta name="msapplication-TileColor" content="#007bff">
    
    <!-- Viewport optimization -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" as="style">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" as="style">
    
    <!-- DNS prefetch for CDN domains -->
    <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>